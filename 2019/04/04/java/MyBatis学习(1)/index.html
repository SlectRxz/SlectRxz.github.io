<!DOCTYPE html><html data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>MyBatis学习（1） | 荣先森</title><meta name="description" content="MyBatis学习（1）"><meta name="keywords" content="框架学习"><meta name="author" content="Rong"><meta name="copyright" content="Rong"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/1.jpg"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="MyBatis学习（1）"><meta name="twitter:description" content="MyBatis学习（1）"><meta name="twitter:image" content="https://s2.ax1x.com/2019/12/20/QXMjbj.png"><meta property="og:type" content="article"><meta property="og:title" content="MyBatis学习（1）"><meta property="og:url" content="http://SlectRxz.github.io/2019/04/04/java/MyBatis学习(1)/"><meta property="og:site_name" content="荣先森"><meta property="og:description" content="MyBatis学习（1）"><meta property="og:image" content="https://s2.ax1x.com/2019/12/20/QXMjbj.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://SlectRxz.github.io/2019/04/04/java/MyBatis学习(1)/"><link rel="prev" title="MyBatis学习（2）" href="http://SlectRxz.github.io/2019/04/10/java/Mybatis学习(2)/"><link rel="next" title="MySql连接异常解决" href="http://SlectRxz.github.io/2019/03/24/java基础/MySql/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://blog.csdn.net/qq_36639232","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"Press","message_next":"to bookmark this page"},"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Light Mode Activated Manually","night_to_day":"Dark Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script></head><body><canvas class="fireworks"></canvas><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">荣先森</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">46</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">12</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">11</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#介绍MyBatis"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">介绍MyBatis</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-工程搭建"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">1.工程搭建</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-1导jar包"><span class="toc_mobile_items-number">2.0.1.</span> <span class="toc_mobile_items-text">1.1导jar包</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-2准备pojo类（实体类相当于JavaBean）"><span class="toc_mobile_items-number">2.0.2.</span> <span class="toc_mobile_items-text">1.2准备pojo类（实体类相当于JavaBean）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-3配置SqlMapConfig-xml-核心配置文件一个"><span class="toc_mobile_items-number">2.0.3.</span> <span class="toc_mobile_items-text">1.3配置SqlMapConfig.xml(核心配置文件一个)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-4配置关系映射文件（多个）"><span class="toc_mobile_items-number">2.0.4.</span> <span class="toc_mobile_items-text">1.4配置关系映射文件（多个）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-5测试类（增删查改）"><span class="toc_mobile_items-number">2.0.5.</span> <span class="toc_mobile_items-text">1.5测试类（增删查改）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-6入门小结"><span class="toc_mobile_items-number">2.0.6.</span> <span class="toc_mobile_items-text">1.6入门小结</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-MyBatis的dao开发-两种实现方式，推荐第二种"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">2.MyBatis的dao开发(两种实现方式，推荐第二种)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-1原始dao开发"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">2.1原始dao开发</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-2接口动态代理-只有接口，没有实现类"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">2.2接口动态代理(只有接口，没有实现类)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-SqlMapConfig-xml配置"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">3.SqlMapConfig.xml配置</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-1-properties配置"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">3.1 properties配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-2-typeAliases-别名配置"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">3.2 typeAliases(别名配置)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-3mappers-映射器配置"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">3.3mappers(映射器配置)</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍MyBatis"><span class="toc-number">1.</span> <span class="toc-text">介绍MyBatis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-工程搭建"><span class="toc-number">2.</span> <span class="toc-text">1.工程搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1导jar包"><span class="toc-number">2.0.1.</span> <span class="toc-text">1.1导jar包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2准备pojo类（实体类相当于JavaBean）"><span class="toc-number">2.0.2.</span> <span class="toc-text">1.2准备pojo类（实体类相当于JavaBean）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3配置SqlMapConfig-xml-核心配置文件一个"><span class="toc-number">2.0.3.</span> <span class="toc-text">1.3配置SqlMapConfig.xml(核心配置文件一个)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4配置关系映射文件（多个）"><span class="toc-number">2.0.4.</span> <span class="toc-text">1.4配置关系映射文件（多个）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5测试类（增删查改）"><span class="toc-number">2.0.5.</span> <span class="toc-text">1.5测试类（增删查改）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6入门小结"><span class="toc-number">2.0.6.</span> <span class="toc-text">1.6入门小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-MyBatis的dao开发-两种实现方式，推荐第二种"><span class="toc-number">3.</span> <span class="toc-text">2.MyBatis的dao开发(两种实现方式，推荐第二种)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1原始dao开发"><span class="toc-number">3.1.</span> <span class="toc-text">2.1原始dao开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2接口动态代理-只有接口，没有实现类"><span class="toc-number">3.2.</span> <span class="toc-text">2.2接口动态代理(只有接口，没有实现类)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-SqlMapConfig-xml配置"><span class="toc-number">4.</span> <span class="toc-text">3.SqlMapConfig.xml配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-properties配置"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 properties配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-typeAliases-别名配置"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 typeAliases(别名配置)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3mappers-映射器配置"><span class="toc-number">4.3.</span> <span class="toc-text">3.3mappers(映射器配置)</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://s2.ax1x.com/2019/12/20/QXMjbj.png)"><div id="post-info"><div id="post-title"><div class="posttitle">MyBatis学习（1）</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2019-04-04<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2019-12-20</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/JavaWeb/">JavaWeb</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><p>MyBatis环境的搭建以及基本操作<br><a id="more"></a></p>
<h2 id="介绍MyBatis"><a href="#介绍MyBatis" class="headerlink" title="介绍MyBatis"></a>介绍MyBatis</h2><ol>
<li>目前最主流的持久层框架为hibernate与mybatis，而且国内目前情况使用Mybatis的公司比hibernate要多。</li>
<li>Hibernate学习门槛不低，要精通门槛更高。门槛高在怎么设计O/R映射，在性能和对象模型之间如何权衡取得平衡，以及怎样用好Hibernate缓存与数据加载策略方面需要你的经验和能力都很强才行。国内目前前的情况精通hibernate技术大牛非常少。</li>
<li>sql优化方面，Hibernate的查询会将表中的所有字段查询出来，这一点会有性能消耗。当然了，Hibernate也可以自己写SQL来指定需要查询的字段，但这样就破坏了Hibernate开发的简洁性。说得更深入一些，如果有个查询要关联多张表，比如5张表，10张表时，而且，我们要取的字段只是其中几张表的部分字段。这时用hibernate时就会显得非常力不从心。就算用hibernate的sqlquery，后续的维护工作也会让人发狂。<h2 id="1-工程搭建"><a href="#1-工程搭建" class="headerlink" title="1.工程搭建"></a>1.工程搭建</h2><blockquote>
<p>我感觉框架的工作就是把许多事情都帮你去完成了，越是简洁的代码，背后实现的原理也就越复杂，每一个框架学习最难适应的就是工程的搭建，即入门。</p>
</blockquote>
<h4 id="1-1导jar包"><a href="#1-1导jar包" class="headerlink" title="1.1导jar包"></a>1.1导jar包</h4><a href="/img/imgs/mybatis/1.png" data-fancybox="group" data-caption="" class="fancybox"><img src="/img/imgs/mybatis/1.png" alt="" title="" class="mediumZoom"></a><h4 id="1-2准备pojo类（实体类相当于JavaBean）"><a href="#1-2准备pojo类（实体类相当于JavaBean）" class="headerlink" title="1.2准备pojo类（实体类相当于JavaBean）"></a>1.2准备pojo类（实体类相当于JavaBean）</h4><blockquote>
<p>mybatis的查询返回，查询参数的输入都是以对象为实参进行</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  package pojo;</span><br><span class="line">  import java.util.Date;</span><br><span class="line">  public class User &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String username;// 用户姓名</span><br><span class="line">	private String sex;// 性别</span><br><span class="line">	private Date birthday;// 生日</span><br><span class="line">	private String address;// 地址</span><br><span class="line">	private String uuid2;//uuid</span><br><span class="line">	public String getUuid2() &#123;</span><br><span class="line">		return uuid2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUuid2(String uuid2) &#123;</span><br><span class="line">		this.uuid2 = uuid2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getUsername() &#123;</span><br><span class="line">		return username;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUsername(String username) &#123;</span><br><span class="line">		this.username = username;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getSex() &#123;</span><br><span class="line">		return sex;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setSex(String sex) &#123;</span><br><span class="line">		this.sex = sex;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Date getBirthday() &#123;</span><br><span class="line">		return birthday;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setBirthday(Date birthday) &#123;</span><br><span class="line">		this.birthday = birthday;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getAddress() &#123;</span><br><span class="line">		return address;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setAddress(String address) &#123;</span><br><span class="line">		this.address = address;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;User [id=&quot; + id + &quot;, username=&quot; +</span><br><span class="line">     username + &quot;, sex=&quot; + sex + &quot;,</span><br><span class="line">     birthday=&quot; + birthday + &quot;, address=&quot;</span><br><span class="line">			+ address + &quot;,</span><br><span class="line">        uuid2=&quot; +</span><br><span class="line">         uuid2 + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</blockquote>
</li>
</ol>
<h4 id="1-3配置SqlMapConfig-xml-核心配置文件一个"><a href="#1-3配置SqlMapConfig-xml-核心配置文件一个" class="headerlink" title="1.3配置SqlMapConfig.xml(核心配置文件一个)"></a>1.3配置SqlMapConfig.xml(核心配置文件一个)</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- 先加载内部标签，再加载外部文件，属性名称一致时，替换内容 --&gt;</span><br><span class="line">	&lt;properties resource=&quot;db.properties&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;jdbc.username&quot; value=&quot;root1&quot;/&gt;</span><br><span class="line">		&lt;property name=&quot;jdbc.password&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">	&lt;/properties&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">	别名配置：</span><br><span class="line">		为什么要使用别名：</span><br><span class="line">    我们的关系映射文件的parameterType往往是一个类名.包名，</span><br><span class="line">    此时我们需要简写	有两种配置方式</span><br><span class="line">			1.单个别名定义：包名.类名</span><br><span class="line">			2.别名包扫描器（推荐使用）直接包名，在关系映射中可直接类名，</span><br><span class="line">			  相当于在使用的时候不用写包名，更加方便</span><br><span class="line"> --&gt;</span><br><span class="line">	&lt;typeAliases&gt;</span><br><span class="line">		&lt;!-- &lt;typeAlias type=&quot;pojo.User&quot; alias=&quot;user&quot;/&gt; --&gt;</span><br><span class="line">		&lt;package name=&quot;pojo&quot;/&gt;</span><br><span class="line">	&lt;/typeAliases&gt;</span><br><span class="line">	&lt;!-- 和spring整合后 environments配置将废除 --&gt;</span><br><span class="line">	&lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">		&lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">			&lt;!-- 使用jdbc事务管理 --&gt;</span><br><span class="line">			&lt;transactionManager type=&quot;JDBC&quot; /&gt;</span><br><span class="line">			&lt;!-- 数据库连接池 --&gt;</span><br><span class="line">			&lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">				&lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driverClass&#125;&quot; /&gt;</span><br><span class="line">				&lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;</span><br><span class="line">				&lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt;</span><br><span class="line">				&lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt;</span><br><span class="line">			&lt;/dataSource&gt;</span><br><span class="line">		&lt;/environment&gt;</span><br><span class="line">	&lt;/environments&gt;</span><br><span class="line">	&lt;!-- 加载映射文件 --&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    	 加载mapper映射文件有四种方式</span><br><span class="line">    	1.加载resource						</span><br><span class="line">      	&lt;mapper resource=&quot;mybatis/user.xml&quot;/&gt;</span><br><span class="line">    	2.class扫描（dao动态代理 接口+关系映射文件）&lt;mapper class=&quot;Mapper.mapper&quot;/&gt;</span><br><span class="line">    		要求 :1.映射文件必须和接口位于同一目录</span><br><span class="line">                 2.映射文件一定要与接口同名（否则映射文件找不到接口）</span><br><span class="line">        3.包扫描</span><br><span class="line">        使用场景：当我们有几百个pojo的接口时，需要对某一个包下面的配置文件进行同一扫描</span><br><span class="line">         	要求 :1.映射文件必须和接口位于同一目录</span><br><span class="line">                 2.映射文件一定要与接口同名（否则映射文件找不到接口）</span><br><span class="line">        4.&lt;mapper url=&quot;&quot;/&gt;绝对路径（从磁盘上找，一般不使用该方法）</span><br><span class="line">     --&gt;</span><br><span class="line">	&lt;mappers&gt;</span><br><span class="line">	&lt;!-- resource基于calsspath的路径去查找 --&gt;</span><br><span class="line">	&lt;!--&lt;mapper resource=&quot;mybatis/userMapper.xml&quot;/&gt; --&gt;</span><br><span class="line">		&lt;!-- &lt;mapper class=&quot;Mapper.mapper&quot;/&gt; --&gt;</span><br><span class="line">		&lt;mapper resource=&quot;mybatis/user.xml&quot;/&gt;</span><br><span class="line">		&lt;package name=&quot;Mapper&quot;/&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></div>
<h4 id="1-4配置关系映射文件（多个）"><a href="#1-4配置关系映射文件（多个）" class="headerlink" title="1.4配置关系映射文件（多个）"></a>1.4配置关系映射文件（多个）</h4><blockquote>
<p>关系映射配置文件一般是对某一个实体的增删查改操作封装在一个映射文件中，在SqlMapConfig.xml中注入，实际开发中有多个。</p>
</blockquote>
<p><strong>user.xml</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;!-- nameSpace：命名空间，用于分离sql语句 --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;user&quot;&gt;</span><br><span class="line">	&lt;!-- id:statementId 语句的唯一标识符</span><br><span class="line">	1. resultType:返回结果集的数据类型    ========&gt;包名.类名(如果是查询所有集)</span><br><span class="line">	2. parameterType:查询的入参的数据类型 规定死了等一下要传入参数的类型</span><br><span class="line">	3. #&#123;&#125;:点位符，相当于JDBC中的    ？</span><br><span class="line">	4.$&#123;&#125;是字符串拼接符   目的是使我们传入的字符串不用每一次都带一个%String%，如何去掉百分号</span><br><span class="line">	      ！！！如果你要传入的是基本类型，括号里面一定要写value！！！</span><br><span class="line">	 --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;select id=&quot;getUserById&quot; parameterType=&quot;int&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">		SELECT * FROM USER WHERE id = #&#123;id1&#125;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;!-- ======================================================================== --&gt;</span><br><span class="line">	&lt;!-- 如果你返回值是为集合（例如一个list），那么你只需要返回</span><br><span class="line">  值类型填返回list中的类型就行 --&gt;</span><br><span class="line">	&lt;select id=&quot;getUserByName&quot; parameterType=&quot;String&quot; resultType=&quot;pojo.User&quot;&gt;</span><br><span class="line">			&lt;!-- SELECT * FROM USER WHERE username LIKE #&#123;name111&#125; --&gt;</span><br><span class="line">			&lt;!-- 注意：</span><br><span class="line">				$&#123;&#125;是字符串拼接符   目的是使我们传入的字符串不用每一</span><br><span class="line">          次都带一个%String%，如何去掉百分号</span><br><span class="line">				！！！如果你要传入的是基本类型，括号里面一定要写value！！！</span><br><span class="line">			 --&gt;   </span><br><span class="line">        	SELECT id,username,birthday,sex,address FROM USER</span><br><span class="line">                WHERE username LIKE &apos;%$&#123;value&#125;%&apos;;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;!-- =============================================================================== --&gt;</span><br><span class="line">	&lt;!--插入用户     </span><br><span class="line">	  mysql内部函数：select LAST_INSERT_ID()返回最后一次插入值的ID</span><br><span class="line">	  #&#123;&#125;占位符里面填User类中的属性    尝试过，必须使用User类中的属性，否则报错</span><br><span class="line">	  useGeneratedKeys:使用自增</span><br><span class="line">	  keyProperty，这里是user的主键</span><br><span class="line">	  这两个配置会自动调用			select LAST_INSERT_ID()  </span><br><span class="line">          mysql自带函数，返回最后一次插入值的ID</span><br><span class="line">	  --&gt;</span><br><span class="line">	&lt;insert id=&quot;insertUser&quot; parameterType=&quot;pojo.User&quot;</span><br><span class="line">              useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="line">		&lt;!--</span><br><span class="line">		需求：当我们插入一条语句时，</span><br><span class="line">                我们往往可能将对另外一张表产生影响，</span><br><span class="line">                需要得到该插入数据的主键ID</span><br><span class="line">		selectKey:主键返回</span><br><span class="line">		keyProperty:user表中的主键的属性   考虑的是UUID要交给user类的哪一个属性</span><br><span class="line">		resultType：主键的数据类型</span><br><span class="line">		order：指selectKey在何时执行，AFTER表示在之后，BEFORE表示在之前</span><br><span class="line">		将返回的主键返回到user类中的id属性</span><br><span class="line">		 --&gt;</span><br><span class="line">		&lt;!-- &lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;AFTER&quot;&gt;</span><br><span class="line">			select LAST_INSERT_ID()</span><br><span class="line">		&lt;/selectKey&gt; --&gt;</span><br><span class="line">			INSERT INTO mybatis.user ( username, birthday, sex, address)</span><br><span class="line">			VALUES(#&#123;username&#125;, #&#123;birthday&#125;, #&#123;sex&#125;, #&#123;address&#125;);</span><br><span class="line">	&lt;/insert&gt;</span><br><span class="line">&lt;!-- =================================================================================== --&gt;</span><br><span class="line">	&lt;!--</span><br><span class="line">	一般我们数据表中有时候没有ID，此时需要我们定义一个标识来标致主键</span><br><span class="line">	mysql内部函数 select UUID  返回其查询数据表中的唯一标识</span><br><span class="line">	 --&gt;</span><br><span class="line">	 &lt;insert id=&quot;insertUserUUID&quot; parameterType=&quot;pojo.User&quot;</span><br><span class="line">    useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="line">	 &lt;!--</span><br><span class="line">	 将会将会生成每条数据对应的唯一标识UUID并返回</span><br><span class="line">	 但是，当使用selectKey的时候，就相当于我们自己定义每条数据的返回标识（主键），</span><br><span class="line">	 useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;不会生效</span><br><span class="line">	 而generateKey默认使用id为表示并返回，二者取其一</span><br><span class="line">	  --&gt;</span><br><span class="line">		&lt;selectKey keyProperty=&quot;uuid2&quot; resultType=&quot;String&quot; order=&quot;BEFORE&quot;&gt;</span><br><span class="line">			select UUID()</span><br><span class="line">		&lt;/selectKey&gt;</span><br><span class="line">			INSERT INTO mybatis.user ( username, birthday, sex, address,uuid2)</span><br><span class="line">			VALUES(#&#123;username&#125;, #&#123;birthday&#125;, #&#123;sex&#125;, #&#123;address&#125;,#&#123;uuid2&#125;);</span><br><span class="line">	&lt;/insert&gt;</span><br><span class="line">&lt;!-- ========================================================================= --&gt;</span><br><span class="line">	&lt;update id=&quot;updateUserName&quot; parameterType=&quot;pojo.User&quot;&gt;</span><br><span class="line">	update user set username=#&#123;username&#125; where id=#&#123;id&#125;</span><br><span class="line">	&lt;/update&gt;</span><br><span class="line">&lt;!-- ========================================================================= --&gt;</span><br><span class="line">	&lt;delete id=&quot;deleteUser&quot; parameterType=&quot;int&quot;&gt;</span><br><span class="line">	delete from user where id=#&#123;id&#125;</span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></div></p>
<h4 id="1-5测试类（增删查改）"><a href="#1-5测试类（增删查改）" class="headerlink" title="1.5测试类（增删查改）"></a>1.5测试类（增删查改）</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package Test;</span><br><span class="line"></span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import Utils.SqlSessionFactoryUtils;</span><br><span class="line">import pojo.User;</span><br><span class="line"></span><br><span class="line">public class testDemo1 &#123;</span><br><span class="line">	//根据用户ID查询用户信息，查询结果是一个</span><br><span class="line">	@Test</span><br><span class="line">	public void test1() throws Exception&#123;</span><br><span class="line">		//1.创建sqlSessionFactoryBuilder对象</span><br><span class="line">		SqlSessionFactoryBuilder sqlSessionFactoryBuilder =</span><br><span class="line">     new SqlSessionFactoryBuilder();</span><br><span class="line">		//2.查找配置文件创建输入流</span><br><span class="line">		InputStream inputStream = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);</span><br><span class="line">		//3.加载配置文件，创建SqlSessionFactory对象</span><br><span class="line">		SqlSessionFactory sqlSessionFactory =</span><br><span class="line">     sqlSessionFactoryBuilder.build(inputStream);</span><br><span class="line">		//4.创建SqlSession对象</span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		//注意：SQL中的增删改查方法都在SqlSession对象中</span><br><span class="line">		User user = sqlSession.selectOne(&quot;user.getUserById&quot;,1);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">		//5.释放资源</span><br><span class="line">		sqlSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">	//根据用户的姓进行模糊查询，返回值是一个集合</span><br><span class="line">	@Test</span><br><span class="line">	public void test2()&#123;</span><br><span class="line">		//通过工具类得到SqlSessionFactory对象</span><br><span class="line">		SqlSessionFactory sqlSessionFactory =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory();</span><br><span class="line">		//创建SqlSession对象</span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		//查询，返回一个list</span><br><span class="line">		List&lt;User&gt; user = sqlSession.selectList(&quot;user.getUserByName&quot;,&quot;张&quot;);</span><br><span class="line">		for(User u:user)&#123;</span><br><span class="line">			System.out.println(u);</span><br><span class="line">		&#125;</span><br><span class="line">		//关闭资源</span><br><span class="line">		sqlSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">	//插入用户</span><br><span class="line">	@Test</span><br><span class="line">	public void test3()&#123;</span><br><span class="line">		SqlSessionFactory sqlSessionFactory =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory();</span><br><span class="line">		SqlSession openSession = sqlSessionFactory.openSession();</span><br><span class="line">		//设置为true，sqlSession会默认提交    就不用手动提交  openSession.commit();</span><br><span class="line">//		SqlSession openSession = sqlSessionFactory.openSession(true);</span><br><span class="line">		User user = new User();</span><br><span class="line">		user.setUsername(&quot;大虎22&quot;);</span><br><span class="line">		user.setAddress(&quot;宜昌&quot;);</span><br><span class="line">		user.setBirthday(new Date());</span><br><span class="line">		user.setSex(&quot;1&quot;);</span><br><span class="line">		//通过selectKey将插入后生成的主键返回</span><br><span class="line">		openSession.insert(&quot;user.insertUser&quot;, user);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">		//提交事务（默认不提交）</span><br><span class="line">		openSession.commit();</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">	//插入用户，返回UUID</span><br><span class="line">	@Test</span><br><span class="line">	public void test4()&#123;</span><br><span class="line">		SqlSessionFactory sqlSessionFactory =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory();</span><br><span class="line">		SqlSession openSession = sqlSessionFactory.openSession();</span><br><span class="line">		//设置为true，sqlSession会默认提交    就不用手动提交  openSession.commit();</span><br><span class="line">//		SqlSession openSession = sqlSessionFactory.openSession(true);</span><br><span class="line">		User user = new User();</span><br><span class="line">		user.setUsername(&quot;大虎24&quot;);</span><br><span class="line">		user.setAddress(&quot;宜昌&quot;);</span><br><span class="line">		user.setBirthday(new Date());</span><br><span class="line">		user.setSex(&quot;1&quot;);</span><br><span class="line">		//通过selectKey将插入后生成的主键返回</span><br><span class="line">		openSession.insert(&quot;user.insertUserUUID&quot;, user);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">		//提交事务（默认不提交）</span><br><span class="line">		openSession.commit();</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">	//更新</span><br><span class="line">	//--------------------------------注意：更新与删除后一定要提交事务</span><br><span class="line">	@Test</span><br><span class="line">	public void test5()&#123;</span><br><span class="line">		SqlSessionFactory sqlSessionFactory =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory();</span><br><span class="line">		SqlSession openSession = sqlSessionFactory.openSession();</span><br><span class="line">		User user = new User();</span><br><span class="line">		user.setId(10);</span><br><span class="line">		user.setUsername(&quot;大虎25&quot;);</span><br><span class="line">		//通过selectKey将插入后生成的主键返回</span><br><span class="line">//		openSession.insert(&quot;user.updateUserName&quot;, user);</span><br><span class="line">		//注意：此处用insert、select都可以达到相同的效果，但是为了规范</span><br><span class="line">		openSession.update(&quot;user.updateUserName&quot;, user);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">		//提交事务（默认不提交）</span><br><span class="line">		openSession.commit();</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">	//删除</span><br><span class="line">	@Test</span><br><span class="line">	public void test6()&#123;</span><br><span class="line">		SqlSessionFactory sqlSessionFactory =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory();</span><br><span class="line">		SqlSession openSession = sqlSessionFactory.openSession();</span><br><span class="line">		openSession.delete(&quot;user.deleteUser&quot;,30);</span><br><span class="line">		//提交事务（默认不提交）</span><br><span class="line">		openSession.commit();</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>mybatis的核心类：SqlSessionFactoryBuilder、SqlSessionFactory、SqlSession</p>
</blockquote>
<h4 id="1-6入门小结"><a href="#1-6入门小结" class="headerlink" title="1.6入门小结"></a>1.6入门小结</h4><ul>
<li>连接池的配置是在SqlMapConfig.xml映射文件中配置完毕的。其中就包括了数据库的连接。</li>
<li>sql查询语句的配置是在关系映射文件中实现的，在此工程下是user.xml</li>
<li>框架图（记）<br><a href="/img/imgs/mybatis/2.png" data-fancybox="group" data-caption="" class="fancybox"><img src="/img/imgs/mybatis/2.png" alt="" title="" class="mediumZoom"></a><br>框架图的解释：<br>MyBatis有两种配置文件<ul>
<li>核心配置文件SqlMapConfig.xml(一个)</li>
<li>关系映射配置文件（多个）一般对应表的数量<br>通过SqlSeessionFactoryBulder类连加载<br>SqlSession只是一个接口，真正干活的是底层的执行器（Executor）<h2 id="2-MyBatis的dao开发-两种实现方式，推荐第二种"><a href="#2-MyBatis的dao开发-两种实现方式，推荐第二种" class="headerlink" title="2.MyBatis的dao开发(两种实现方式，推荐第二种)"></a>2.MyBatis的dao开发(两种实现方式，推荐第二种)</h2><h3 id="2-1原始dao开发"><a href="#2-1原始dao开发" class="headerlink" title="2.1原始dao开发"></a>2.1原始dao开发</h3><strong>注：使用原有的user.xml关系配置文件</strong></li>
</ul>
</li>
</ul>
<ol>
<li><p>定义一个UserDao接口</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package dao;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import pojo.User;</span><br><span class="line">/*当我们@param id</span><br><span class="line">* 		@return</span><br><span class="line">* 这些的时候，在我们从别的类里面去调用的时候，也会看到其中的注释</span><br><span class="line">* 养成好习惯，便于调用接口的时候，知道该接口是干嘛用的</span><br><span class="line">*/</span><br><span class="line">/**</span><br><span class="line"> * 用户信息持久化接口</span><br><span class="line"> * @author rong</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public interface UserDao &#123;</span><br><span class="line">	/**</span><br><span class="line">	 * 根据用户ID查询用户信息</span><br><span class="line">	 * @param id</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public User getUserById(Integer id);</span><br><span class="line">	/**</span><br><span class="line">	 * 根据用户名查找用户列表</span><br><span class="line">	 * @param name</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public List&lt;User&gt;getUserByName(String name);</span><br><span class="line">	/**</span><br><span class="line">	 * 添加用户</span><br><span class="line">	 * @param user</span><br><span class="line">	 */</span><br><span class="line">	public void insertUser(User user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>定义接口的实现类</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package dao.impl;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line"></span><br><span class="line">import Utils.SqlSessionFactoryUtils;</span><br><span class="line">import dao.UserDao;</span><br><span class="line">import pojo.User;</span><br><span class="line">/**</span><br><span class="line"> * 用户信息接口实现类</span><br><span class="line"> * @author rong</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class UserDaoImpl implements UserDao &#123;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public User getUserById(Integer id) &#123;</span><br><span class="line">		SqlSession openSession =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory().openSession();</span><br><span class="line">		User user = openSession.selectOne(&quot;user.getUserById&quot;,10);</span><br><span class="line">		openSession.close();</span><br><span class="line">		return user;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; getUserByName(String name) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		SqlSession openSession =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory().openSession();</span><br><span class="line">		List&lt;User&gt; users = openSession.selectList(&quot;user.getUserByName&quot;, name);</span><br><span class="line">		openSession.close();</span><br><span class="line">		return users;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void insertUser(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		SqlSession openSession =</span><br><span class="line">     SqlSessionFactoryUtils.getSqlSessionFactory().openSession();</span><br><span class="line">		openSession.insert(&quot;user.insertUser&quot;, user);</span><br><span class="line">		openSession.commit();</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>测试类<br><strong>小技巧：使用dao测试</strong> 一键生成<br><a href="/img/imgs/mybatis/3.png" data-fancybox="group" data-caption="" class="fancybox"><img src="/img/imgs/mybatis/3.png" alt="" title="" class="mediumZoom"></a></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package Test;</span><br><span class="line"></span><br><span class="line">import static org.junit.Assert.fail;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import dao.UserDao;</span><br><span class="line">import dao.impl.UserDaoImpl;</span><br><span class="line">import pojo.User;</span><br><span class="line">/**</span><br><span class="line"> * 直接针对接口生成测试类</span><br><span class="line"> * @author rong</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class UserDaoTest &#123;</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void testGetUserById() &#123;</span><br><span class="line">		UserDao userDao=new UserDaoImpl();</span><br><span class="line">		User user = userDao.getUserById(10);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void testGetUserByName() &#123;</span><br><span class="line">		UserDao userDao=new UserDaoImpl();</span><br><span class="line">		List&lt;User&gt; users = userDao.getUserByName(&quot;张&quot;);</span><br><span class="line">		for(User u:users)&#123;</span><br><span class="line">			System.out.println(u);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void testInsertUser() &#123;</span><br><span class="line">		UserDao userDao=new UserDaoImpl();</span><br><span class="line">		User user = new User();</span><br><span class="line">		user.setUsername(&quot;大虎25&quot;);</span><br><span class="line">		user.setAddress(&quot;宜昌&quot;);</span><br><span class="line">		user.setBirthday(new Date());</span><br><span class="line">		user.setSex(&quot;1&quot;);</span><br><span class="line">		userDao.insertUser(user);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<h3 id="2-2接口动态代理-只有接口，没有实现类"><a href="#2-2接口动态代理-只有接口，没有实现类" class="headerlink" title="2.2接口动态代理(只有接口，没有实现类)"></a>2.2接口动态代理(只有接口，没有实现类)</h3><p>1 定义dao接口<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package Mapper;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import pojo.User;</span><br><span class="line">/*当我们@param id</span><br><span class="line">* 		@return</span><br><span class="line">* 这些的时候，在我们从别的类里面去调用的时候，也会看到其中的注释</span><br><span class="line">* 养成好习惯，便于调用接口的时候，知道该接口是干嘛用的</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 用户信息持久化接口（dao动态代理）核心方法openSession.getMapper(mapper.class)得到代理对象</span><br><span class="line"> * @author rong</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public interface mapper&#123;</span><br><span class="line">	/**</span><br><span class="line">	 * 根据用户ID查询用户信息</span><br><span class="line">	 * @param id</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public User getUserById(Integer id);</span><br><span class="line">	/**</span><br><span class="line">	 * 根据用户名查找用户列表</span><br><span class="line">	 * @param name</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public List&lt;User&gt;getUserByName(String name);</span><br><span class="line">	/**</span><br><span class="line">	 * 添加用户</span><br><span class="line">	 * @param user</span><br><span class="line">	 */</span><br><span class="line">	public void insertUser(User user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<ol start="2">
<li><p>关系配置文件的规则</p>
<blockquote>
<p>1.namespace必需是接口的全路径名<br>2.接口的方法名必需与映射文件的sql id一致<br>3.接口的输入参数必需与映射文件的parameterType类型一致<br>4.接口的返回类型必须与映射文件的resultType类型一致</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">	dao的动态代理规则：</span><br><span class="line">	1.namespace必须是dao接口类的全路径</span><br><span class="line">	2.映射文件的sql ID必须与接口的方法名一致</span><br><span class="line">	3.映射文件parameterType的类型必须与接口输入参数一致</span><br><span class="line">	4.映射文件的resultType的类型必须与接口的输出参数一致</span><br><span class="line"> --&gt;</span><br><span class="line"></span><br><span class="line">&lt;mapper namespace=&quot;Mapper.mapper&quot;&gt;</span><br><span class="line">	&lt;select id=&quot;getUserById&quot; parameterType=&quot;int&quot; resultType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		SELECT *</span><br><span class="line">		FROM USER WHERE id = #&#123;id1&#125;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;!-- =================================================================================================== --&gt;</span><br><span class="line">	&lt;!-- 如果你返回值是为集合（例如一个list），那么你只需要返回值类型填返回list中的类型就行 --&gt;</span><br><span class="line">	&lt;select id=&quot;getUserByName&quot; parameterType=&quot;String&quot; resultType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		&lt;!-- SELECT * FROM USER WHERE username LIKE #&#123;name111&#125; --&gt;</span><br><span class="line">		&lt;!-- 注意： $&#123;&#125;是字符串拼接符 目的是使我们传入的字符串不用每一次都带一个%String%，如何去掉百分号 ！！！如果你要传入的是基本类型，括号里面一定要写value！！！ --&gt;</span><br><span class="line">		SELECT id,username,birthday,sex,address FROM USER WHERE username LIKE</span><br><span class="line">		&apos;%$&#123;value&#125;%&apos;;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;!-- =================================================================================================== --&gt;</span><br><span class="line">	&lt;!--插入用户 mysql内部函数：select LAST_INSERT_ID()返回最后一次插入值的ID #&#123;&#125;占位符里面填User类中的属性</span><br><span class="line">		尝试过，必须使用User类中的属性，否则报错 useGeneratedKeys:使用自增 keyProperty，这里是user的主键 这两个配置会自动调用</span><br><span class="line">		select LAST_INSERT_ID() mysql自带函数，返回最后一次插入值的ID --&gt;</span><br><span class="line">	&lt;insert id=&quot;insertUser&quot; parameterType=&quot;pojo.User&quot;</span><br><span class="line">		useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="line">		&lt;!-- 需求：当我们插入一条语句时，我们往往可能将对另外一张表产生影响，需要得到该插入数据的主键ID selectKey:主键返回 keyProperty:user表中的主键的属性</span><br><span class="line">			考虑的是UUID要交给user类的哪一个属性 resultType：主键的数据类型 order：指selectKey在何时执行，AFTER表示在之后，BEFORE表示在之前</span><br><span class="line">			将返回的主键返回到user类中的id属性 --&gt;</span><br><span class="line">		&lt;!-- &lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;AFTER&quot;&gt; select</span><br><span class="line">			LAST_INSERT_ID() &lt;/selectKey&gt; --&gt;</span><br><span class="line">		INSERT INTO mybatis.user ( username, birthday, sex, address)</span><br><span class="line">		VALUES(#&#123;username&#125;, #&#123;birthday&#125;, #&#123;sex&#125;, #&#123;address&#125;);</span><br><span class="line">	&lt;/insert&gt;</span><br><span class="line">&lt;!-- ================================================================================================ --&gt;</span><br><span class="line">	&lt;update id=&quot;updateUserName&quot; parameterType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		update user set username=#&#123;username&#125; where id=#&#123;id&#125;</span><br><span class="line">	&lt;/update&gt;</span><br><span class="line">&lt;!-- ================================================================================================== --&gt;</span><br><span class="line">	&lt;delete id=&quot;deleteUser&quot; parameterType=&quot;int&quot;&gt;</span><br><span class="line">		delete from user where id=#&#123;id&#125;</span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></div>
</blockquote>
</li>
<li><p>在SqlMapConfig中加载映射文件</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">	&lt;!-- resource基于calsspath的路径去查找 --&gt;</span><br><span class="line">	  &lt;mapper resource=&quot;mybatis/userMapper.xml&quot;/&gt;</span><br><span class="line">		&lt;mapper resource=&quot;mybatis/user.xml&quot;/&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>测试类<br>那么，动态代理将会自动帮我们</p>
<blockquote>
<p>核心方法 openSession.getMapper(mapper.class)返回该类口的一个匿名实现类，你只需要用接口去接</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package Test;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import Mapper.mapper;</span><br><span class="line">import Utils.SqlSessionFactoryUtils;</span><br><span class="line">import pojo.User;</span><br><span class="line">/**</span><br><span class="line"> * dao动态代理的测试类</span><br><span class="line"> * @author rong</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class mapperTest &#123;</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void testGetUserById() &#123;</span><br><span class="line">		SqlSession openSession = SqlSessionFactoryUtils.getSqlSessionFactory().openSession();</span><br><span class="line">		//获得代理对象，传入的参数是接口的class文件</span><br><span class="line">		mapper mapp = openSession.getMapper(mapper.class);</span><br><span class="line">		User user = mapp.getUserById(10);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void testGetUserByName() &#123;</span><br><span class="line">		SqlSession openSession = SqlSessionFactoryUtils.getSqlSessionFactory().openSession();</span><br><span class="line">		//获得代理对象</span><br><span class="line">		mapper mapp = openSession.getMapper(mapper.class);</span><br><span class="line">		List&lt;User&gt; users = mapp.getUserByName(&quot;大&quot;);</span><br><span class="line">		for(User user:users)&#123;</span><br><span class="line">			System.out.println(user);</span><br><span class="line">		&#125;</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void testInsertUser() &#123;</span><br><span class="line">		SqlSession openSession = SqlSessionFactoryUtils.getSqlSessionFactory().openSession();</span><br><span class="line">		//获得代理对象</span><br><span class="line">		mapper mapp = openSession.getMapper(mapper.class);</span><br><span class="line">		User user = new User();</span><br><span class="line">		user.setUsername(&quot;大虎26&quot;);</span><br><span class="line">		user.setAddress(&quot;宜昌&quot;);</span><br><span class="line">		user.setBirthday(new Date());</span><br><span class="line">		user.setSex(&quot;1&quot;);</span><br><span class="line">		mapp.insertUser(user);</span><br><span class="line">		openSession.commit();</span><br><span class="line">		openSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</blockquote>
</li>
</ol>
<h2 id="3-SqlMapConfig-xml配置"><a href="#3-SqlMapConfig-xml配置" class="headerlink" title="3.SqlMapConfig.xml配置"></a>3.SqlMapConfig.xml配置</h2><blockquote>
<p>SqlMapConfig.xml作为mybatis的核心配置文件，其约束采用DTD，其各个标签的含义如下：</p>
</blockquote>
<p><a href="/img/imgs/mybatis/4.png" data-fancybox="group" data-caption="SqlMapConfig约束" class="fancybox"><img src="/img/imgs/mybatis/4.png" alt="SqlMapConfig约束" title="SqlMapConfig约束" class="mediumZoom"></a></p>
<h3 id="3-1-properties配置"><a href="#3-1-properties配置" class="headerlink" title="3.1 properties配置"></a>3.1 properties配置</h3><p>配置原因：在我们配置数据库连接词时往往有许多参数，我们需要把这些参数抽取出来方便统一化管理。<br><strong>db.properties</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jdbc.driverClass=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf-8</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=root</span><br></pre></td></tr></table></figure></div></p>
<h3 id="3-2-typeAliases-别名配置"><a href="#3-2-typeAliases-别名配置" class="headerlink" title="3.2 typeAliases(别名配置)"></a>3.2 typeAliases(别名配置)</h3><blockquote>
<p>别名配置：<br>        为什么要使用别名：我们的关系映射文件的parameterType往往是一个类名.包名，此时我们需要简写<br>        有两种配置方式<br>            1.单个别名定义：包名.类名<br>            2.别名包扫描器（推荐使用）直接包名，在关系映射中可直接类名，<br>              相当于在使用的时候不用写包名，更加方便</p>
</blockquote>
<h3 id="3-3mappers-映射器配置"><a href="#3-3mappers-映射器配置" class="headerlink" title="3.3mappers(映射器配置)"></a>3.3mappers(映射器配置)</h3><blockquote>
<p>加载mapper映射文件有四种方式<br>        1.加载resource                            <mapper resource="mybatis/user.xml"><br>        2.class扫描（dao动态代理 接口+关系映射文件）<mapper class="Mapper.mapper"><br>            要求 :1.映射文件必须和接口位于同一目录<br>                 2.映射文件一定要与接口同名（否则映射文件找不到接口）<br>        3.包扫描<br>        使用场景：当我们有几百个pojo的接口时，需要对某一个包下面的配置文件进行同一扫描<br>             要求 :1.映射文件必须和接口位于同一目录<br>                 2.映射文件一定要与接口同名（否则映射文件找不到接口）<br>        4.<mapper url="">绝对路径（从磁盘上找，一般不使用该方法）</mapper></mapper></mapper></p>
</blockquote>
<p>最后将上述操作放在一起<strong>SqlMapConfig.xml</strong>如下：<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- 先加载内部标签，再加载外部文件，属性名称一致时，替换内容 --&gt;</span><br><span class="line">	&lt;properties resource=&quot;db.properties&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;jdbc.username&quot; value=&quot;root1&quot;/&gt;</span><br><span class="line">		&lt;property name=&quot;jdbc.password&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">	&lt;/properties&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">	别名配置：</span><br><span class="line">		为什么要使用别名：我们的关系映射文件的parameterType往往是一个类名.包名，此时我们需要简写</span><br><span class="line">		有两种配置方式</span><br><span class="line">			1.单个别名定义：包名.类名</span><br><span class="line">			2.别名包扫描器（推荐使用）直接包名，在关系映射中可直接类名，</span><br><span class="line">			  相当于在使用的时候不用写包名，更加方便</span><br><span class="line"> --&gt;</span><br><span class="line">	&lt;typeAliases&gt;</span><br><span class="line">		&lt;!-- &lt;typeAlias type=&quot;pojo.User&quot; alias=&quot;user&quot;/&gt; --&gt;</span><br><span class="line">		&lt;package name=&quot;pojo&quot;/&gt;</span><br><span class="line">	&lt;/typeAliases&gt;</span><br><span class="line">	&lt;!-- 和spring整合后 environments配置将废除 --&gt;</span><br><span class="line">	&lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">		&lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">			&lt;!-- 使用jdbc事务管理 --&gt;</span><br><span class="line">			&lt;transactionManager type=&quot;JDBC&quot; /&gt;</span><br><span class="line">			&lt;!-- 数据库连接池 --&gt;</span><br><span class="line">			&lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">				&lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driverClass&#125;&quot; /&gt;</span><br><span class="line">				&lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;</span><br><span class="line">				&lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt;</span><br><span class="line">				&lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt;</span><br><span class="line">			&lt;/dataSource&gt;</span><br><span class="line">		&lt;/environment&gt;</span><br><span class="line">	&lt;/environments&gt;</span><br><span class="line">	&lt;!-- 加载映射文件 --&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    	 加载mapper映射文件有四种方式</span><br><span class="line">    	1.加载resource							&lt;mapper resource=&quot;mybatis/user.xml&quot;/&gt;</span><br><span class="line">    	2.class扫描（dao动态代理 接口+关系映射文件）&lt;mapper class=&quot;Mapper.mapper&quot;/&gt;</span><br><span class="line">    		要求 :1.映射文件必须和接口位于同一目录</span><br><span class="line">                 2.映射文件一定要与接口同名（否则映射文件找不到接口）</span><br><span class="line">        3.包扫描</span><br><span class="line">        使用场景：当我们有几百个pojo的接口时，需要对某一个包下面的配置文件进行同一扫描</span><br><span class="line">         	要求 :1.映射文件必须和接口位于同一目录</span><br><span class="line">                 2.映射文件一定要与接口同名（否则映射文件找不到接口）</span><br><span class="line">        4.&lt;mapper url=&quot;&quot;/&gt;绝对路径（从磁盘上找，一般不使用该方法）</span><br><span class="line">     --&gt;</span><br><span class="line">	&lt;mappers&gt;</span><br><span class="line">	&lt;!-- resource基于calsspath的路径去查找 --&gt;</span><br><span class="line">	&lt;!--&lt;mapper resource=&quot;mybatis/userMapper.xml&quot;/&gt; --&gt;</span><br><span class="line">		&lt;!-- &lt;mapper class=&quot;Mapper.mapper&quot;/&gt; --&gt;</span><br><span class="line">		&lt;mapper resource=&quot;mybatis/user.xml&quot;/&gt;</span><br><span class="line">		&lt;package name=&quot;Mapper&quot;/&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></div></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Rong</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://SlectRxz.github.io/2019/04/04/java/MyBatis学习(1)/">http://SlectRxz.github.io/2019/04/04/java/MyBatis学习(1)/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/框架学习/">框架学习    </a></div><div class="post_share"><div class="social-share" data-image="https://s2.ax1x.com/2019/12/20/QXMjbj.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/04/10/java/Mybatis学习(2)/"><img class="prev_cover lazyload" data-src="https://s2.ax1x.com/2019/12/20/QXMjbj.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>MyBatis学习（2）</span></div></a></div><div class="next-post pull_right"><a href="/2019/03/24/java基础/MySql/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>MySql连接异常解决</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/04/12/java/MyBatis逆向工程/" title="MyBatis逆向工程"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-10</div><div class="relatedPosts_title">MyBatis逆向工程</div></div></a></div><div class="relatedPosts_item"><a href="/2019/04/15/java/Mybatis与Spring整合/" title="MyBatis整合Spring"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-10</div><div class="relatedPosts_title">MyBatis整合Spring</div></div></a></div><div class="relatedPosts_item"><a href="/2019/04/19/java/SpringMVC(1)/" title="SpringMVC学习日志（1）"><img class="relatedPosts_cover lazyload"data-src="https://s2.ax1x.com/2019/12/20/QXMzan.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-10</div><div class="relatedPosts_title">SpringMVC学习日志（1）</div></div></a></div><div class="relatedPosts_item"><a href="/2019/04/10/java/Mybatis学习(2)/" title="MyBatis学习（2）"><img class="relatedPosts_cover lazyload"data-src="https://s2.ax1x.com/2019/12/20/QXMjbj.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-10</div><div class="relatedPosts_title">MyBatis学习（2）</div></div></a></div><div class="relatedPosts_item"><a href="/2019/04/29/java/SpringMVC(3)/" title="SpringMVC学习日志（3）"><img class="relatedPosts_cover lazyload"data-src="https://s2.ax1x.com/2019/12/20/QXMzan.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-10</div><div class="relatedPosts_title">SpringMVC学习日志（3）</div></div></a></div><div class="relatedPosts_item"><a href="/2019/04/20/java/SpringMVC(2)/" title="SpringMVC学习日志（2）"><img class="relatedPosts_cover lazyload"data-src="https://s2.ax1x.com/2019/12/20/QXMzan.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-10</div><div class="relatedPosts_title">SpringMVC学习日志（2）</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Rong</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div><div class="footer_custom_text">welcome to my blog~</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/tw_cn.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>