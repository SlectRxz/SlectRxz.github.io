<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>MyBatis学习（2） | 荣先森</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="MyBatis输入输出映射、动态sql、关联查询的使用。">
<meta name="keywords" content="框架学习">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis学习（2）">
<meta property="og:url" content="http://SlectRxz.github.io/2019/04/10/java/Mybatis学习(2)/index.html">
<meta property="og:site_name" content="荣先森">
<meta property="og:description" content="MyBatis输入输出映射、动态sql、关联查询的使用。">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-04-12T09:37:31.759Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MyBatis学习（2）">
<meta name="twitter:description" content="MyBatis输入输出映射、动态sql、关联查询的使用。">
  
    <link rel="alternative" href="/atom.xml" title="荣先森" type="application/atom+xml">
  
  
    <link rel="icon" href="img/1.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
      <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("bpxE8dkqS0IAdFxTbcqm4IiX-gzGzoHsz", "VRnKkxnTxbDSQtPbl1TiWyLw");</script>
<script src="/js/Counter.js"></script>
  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="img/1.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Rong</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/SlectRxz" title="github">github</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/rselect/activities" title="zhihu">zhihu</a>
					        
								<a class="qq" target="_blank" href="/2215857051" title="qq">qq</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Java基础/" style="font-size: 12.5px;">Java基础</a> <a href="/tags/blog记录/" style="font-size: 10px;">blog记录</a> <a href="/tags/javaWeb基础/" style="font-size: 15px;">javaWeb基础</a> <a href="/tags/javaWeb实战/" style="font-size: 15px;">javaWeb实战</a> <a href="/tags/学习/" style="font-size: 17.5px;">学习</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/框架学习/" style="font-size: 20px;">框架学习</a> <a href="/tags/注解开发/" style="font-size: 10px;">注解开发</a> <a href="/tags/瞎扯/" style="font-size: 10px;">瞎扯</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
		<div style="position:absolute;bottom:170px;opacity:0.6">
		<object type="application/x-shockwave-flash" style="outline:none;" data="http://cdn.abowman.com/widgets/treefrog/treefrog.swf?up_bodyColor=84BF84&up_pattern=1&up_flyColor=F0E80C&up_tongueColor=2BA029&up_patternColor=CFBCBC&up_releaseFly=0&up_frogName=Tree Frog&up_backgroundImage=http://&up_bellySize=.5&up_footColor=2BA029&up_eyeColor=2BA029&up_backgroundColor=261109&" width="250" height="150"><param name="movie" value="http://cdn.abowman.com/widgets/treefrog/treefrog.swf?up_bodyColor=84BF84&up_pattern=1&up_flyColor=F0E80C&up_tongueColor=2BA029&up_patternColor=CFBCBC&up_releaseFly=0&up_frogName=Tree Frog&up_backgroundImage=http://&up_bellySize=.5&up_footColor=2BA029&up_eyeColor=2BA029&up_backgroundColor=261109&"></param><param name="AllowScriptAccess" value="always"></param><param name="wmode" value="opaque"></param><param name="scale" value="noscale"/><param name="salign" value="tl"/></object>
		</div>
		<div style="position:absolute;bottom:80px;left:auto;width:60%;opacity:0.6">
		<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=250 height=86 src="//music.163.com/outchain/player?type=2&id=543681750&auto=0&height=66"></iframe>
		</div>
		
	
		
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Rong</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="img/1.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Rong</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/SlectRxz" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/rselect/activities" title="zhihu">zhihu</a>
			        
						<a class="qq" target="_blank" href="/2215857051" title="qq">qq</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-java/Mybatis学习(2)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/10/java/Mybatis学习(2)/" class="article-date">
  	<time datetime="2019-04-09T16:00:00.000Z" itemprop="datePublished">2019-04-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      MyBatis学习（2）
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架学习/">框架学习</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/JavaWeb/">JavaWeb</a>
	</div>


        
          
<div class="counter-tag counter">
    <span id="/2019/04/10/java/Mybatis学习(2)/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="MyBatis学习（2）">
         &nbsp;
        view
    </span>
</div>

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MyBatis输入输出映射、动态sql、关联查询的使用。<br><a id="more"></a></p>
<blockquote>
<p>由mybatis学习（1）中我们了解到如何搭建mybatis工程，传统dao开发以及动态dao开发，本节主要讨论关系映射配置文件的具体配置。</p>
</blockquote>
<h2 id="1-输入映射与输出映射"><a href="#1-输入映射与输出映射" class="headerlink" title="1.输入映射与输出映射"></a>1.输入映射与输出映射</h2><h3 id="1-1输入映射"><a href="#1-1输入映射" class="headerlink" title="1.1输入映射"></a>1.1输入映射</h3><h4 id="1-1-1简单参数传递"><a href="#1-1-1简单参数传递" class="headerlink" title="1.1.1简单参数传递"></a>1.1.1简单参数传递</h4><blockquote>
<p>包括String，Integer，Double，Float…</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserByName&quot; parameterType=&quot;String&quot; resultType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		&lt;!-- SELECT * FROM USER WHERE username LIKE #&#123;name111&#125; --&gt;</span><br><span class="line">		&lt;!-- 注意： $&#123;&#125;是字符串拼接符 目的是使我们传入的字符串不用每一次都带一个%String%，如何去掉百分号 ！！！</span><br><span class="line">					如果你要传入的是基本类型【注：此时传入类型指的是parameterType】，括号里面一定要写value！！！ 【注：&apos;&apos;不能省，否则报错】--&gt;</span><br><span class="line">		SELECT id,username,birthday,sex,address</span><br><span class="line">		FROM USER</span><br><span class="line">		WHERE username LIKE&apos;%$&#123;value&#125;%&apos;;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h4 id="1-1-2传递pojo对象"><a href="#1-1-2传递pojo对象" class="headerlink" title="1.1.2传递pojo对象"></a>1.1.2传递pojo对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id=&quot;updateUserName&quot; parameterType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		update user set</span><br><span class="line">		username=#&#123;username&#125; where id=#&#123;id&#125;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>
<h4 id="1-1-3传递封装pojo对象"><a href="#1-1-3传递封装pojo对象" class="headerlink" title="1.1.3传递封装pojo对象"></a>1.1.3传递封装pojo对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 输入参数为pojo的包装对象，即有一个成员是pojo类 --&gt;</span><br><span class="line">	&lt;select id=&quot;getByQueryUser&quot; parameterType=&quot;QueryUser&quot;</span><br><span class="line">		resultType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		&lt;!-- SELECT * FROM USER WHERE username LIKE #&#123;name111&#125; --&gt;</span><br><span class="line">		&lt;!-- 注意： $&#123;&#125;是字符串拼接符 目的是使我们传入的字符串不用每一次都带一个%String%，如何去掉百分号 ！！！如果你要传入的是基本类型，括号里面一定要写value！！！ --&gt;</span><br><span class="line">		SELECT id,username,birthday,sex,address FROM USER WHERE username LIKE</span><br><span class="line">		&apos;%$&#123;user.username&#125;%&apos;;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h3 id="1-2输出映射"><a href="#1-2输出映射" class="headerlink" title="1.2输出映射"></a>1.2输出映射</h3><h4 id="1-2-1输出简单类型"><a href="#1-2-1输出简单类型" class="headerlink" title="1.2.1输出简单类型"></a>1.2.1输出简单类型</h4><blockquote>
<p>查询用户总记录数，演示返回简单类型</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserCount&quot; resultType=&quot;int&quot;&gt;</span><br><span class="line">		SELECT COUNT(1) FROM USER</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h4 id="1-2-2输出pojo对象"><a href="#1-2-2输出pojo对象" class="headerlink" title="1.2.2输出pojo对象"></a>1.2.2输出pojo对象</h4><blockquote>
<p>根据id查询用户信息</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserById&quot; parameterType=&quot;int&quot; resultType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		SELECT *</span><br><span class="line">		FROM USER WHERE id = #&#123;id1&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h4 id="1-2-3输出pojo列表"><a href="#1-2-3输出pojo列表" class="headerlink" title="1.2.3输出pojo列表"></a>1.2.3输出pojo列表</h4><blockquote>
<p>根据名字的姓进行查询，返回一个<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
</blockquote>
<!-- 如果你返回值是为集合（例如一个list），那么你只需要返回值类型填返回list中的类型就行 -->
<pre><code>&lt;select id=&quot;getUserByName&quot; parameterType=&quot;String&quot; resultType=&quot;pojo.User&quot;&gt;
    &lt;!-- SELECT * FROM USER WHERE username LIKE #{name111} --&gt;
    &lt;!-- 注意： ${}是字符串拼接符 目的是使我们传入的字符串不用每一次都带一个%String%，如何去掉百分号 ！！！如果你要传入的是基本类型，括号里面一定要写value！！！ --&gt;
    SELECT id,username,birthday,sex,address FROM USER WHERE username LIKE
    &apos;%${value}%&apos;;
&lt;/select&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 2.动态sql</span><br><span class="line">### 2.1 if</span><br><span class="line">&gt;多查询条件拼装引出if标签</span><br><span class="line">&gt;if标签的使用：</span><br><span class="line">		注意：```&lt;if test=&quot;username!=null and username!=&apos;&apos;&quot;&gt;中间不是&amp;&amp;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserByNameSex&quot; parameterType=&quot;user&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">		select *</span><br><span class="line">		from user</span><br><span class="line">		where 1=1</span><br><span class="line">		&lt;if test=&quot;username!=null and username!=&apos;&apos;&quot;&gt;</span><br><span class="line">				and username like&apos;%$&#123;username&#125;%&apos;</span><br><span class="line">		&lt;/if&gt;</span><br><span class="line">		&lt;if test=&quot;sex!=null and sex!=&apos;&apos;&quot;&gt;</span><br><span class="line">				and sex=#&#123;sex&#125;</span><br><span class="line">		&lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-where"><a href="#2-1-where" class="headerlink" title="2.1 where"></a>2.1 where</h3><blockquote>
<p>where标签的使用：<br>    作用：添加where关键字，去掉多余的and</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserByNameSex&quot; parameterType=&quot;user&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">	select *</span><br><span class="line">	from user</span><br><span class="line">	&lt;where&gt;</span><br><span class="line">	&lt;if test=&quot;username!=null and username!=&apos;&apos;&quot;&gt;</span><br><span class="line">	     and username like&apos;%$&#123;username&#125;%&apos;</span><br><span class="line">           &lt;!-- 此处的可能多余的and会由where标签去掉 --&gt;</span><br><span class="line">	&lt;/if&gt;</span><br><span class="line">	&lt;if test=&quot;sex!=null and sex!=&apos;&apos;&quot;&gt;</span><br><span class="line">		and sex=#&#123;sex&#125;</span><br><span class="line">	&lt;/if&gt;</span><br><span class="line">	&lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-foreach"><a href="#2-1-foreach" class="headerlink" title="2.1 foreach"></a>2.1 foreach</h3><blockquote>
<p>foreach标签的使用：</p>
<ul>
<li>collection：要遍历的集合，来源入参，下面的例子的list—是QueryUser.list</li>
<li>items:设置循环变量</li>
<li>open:循环开始前输出的sql内容，其实不写直接放在foreach外面也是可行的</li>
<li>separator:分隔符</li>
<li>close:循环结束拼接的sql<br>需求：查询用户id在某一个范围内的用户信息数据<br>使用：由于mybatis不支持直接传递集合，所以需要在pojo中创建一个集合的属性，我们需要做的就是把(1,10,25,30,34)装入集合里面，再想办法把sql语句拼装出来</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserByIds&quot; parameterType=&quot;QueryUser&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">	&lt;include refid=&quot;user_list&quot;&gt;&lt;/include&gt;</span><br><span class="line">	&lt;where&gt;</span><br><span class="line">	&lt;!-- id IN (1,3,7,8,9) --&gt;</span><br><span class="line">	&lt;foreach collection=&quot;list&quot; item=&quot;ids&quot; open=&quot;id IN(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">		#&#123;ids&#125;</span><br><span class="line">	&lt;/foreach&gt;</span><br><span class="line">	&lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-SQL片段"><a href="#2-1-SQL片段" class="headerlink" title="2.1 SQL片段"></a>2.1 SQL片段</h3><blockquote>
<p>作用：将公共的SQl片段抽取出来，有点相当于jsp中把公共页面包含起来。</p>
</blockquote>
<blockquote>
<p>抽取：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql id=&quot;user_list&quot;&gt;</span><br><span class="line">	select *</span><br><span class="line">	from user</span><br><span class="line">&lt;/sql&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;include refid=&quot;user_list&quot;&gt;&lt;/include&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="3-关联查询"><a href="#3-关联查询" class="headerlink" title="3.关联查询"></a>3.关联查询</h2><blockquote>
<p>在实际开发当中，我们往往需要对多张表进行关联查询，表与表之间有一对一与一对多的关系（多对多属于两个一对多）</p>
</blockquote>
<h3 id="3-1-一对一查询"><a href="#3-1-一对一查询" class="headerlink" title="3.1 一对一查询"></a>3.1 一对一查询</h3><blockquote>
<p>从A表出发在B表当中只有唯一的数据行与之对应，结果最多返回一个数据集。</p>
</blockquote>
<h3 id="3-1-1-使用resultType"><a href="#3-1-1-使用resultType" class="headerlink" title="3.1.1 使用resultType"></a>3.1.1 使用resultType</h3><blockquote>
<p>使用resultType接收，那么必须要有一个与之对应的pojo（因为查询结果有两张表的属性）。<br>需要：重新定义一个pojo，继承其中的一张表对应的pojo。</p>
</blockquote>
<blockquote>
<p>新建pojo</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package pojo;</span><br><span class="line">/**</span><br><span class="line"> * 为了实现多表连接查询</span><br><span class="line"> * 通过resultType返回</span><br><span class="line"> * @author rong</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class UserOrder extends Order &#123;</span><br><span class="line">  //这两个属性是来自于Order表，即B表中的属性</span><br><span class="line">	private String username;</span><br><span class="line">	private Integer id;</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">  .(实现其get/set方法)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改order的映射文件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ===================多表关联查询-1-1使用resultMap===================== --&gt;</span><br><span class="line">&lt;select id=&quot;getOrderUser&quot; resultType=&quot;pojo.UserOrder&quot;&gt;</span><br><span class="line">	SELECT</span><br><span class="line">	o.`id`,</span><br><span class="line">	 o.`user_id` userId,</span><br><span class="line">	 o.`number`,</span><br><span class="line">	 o.`createtime`,</span><br><span class="line">	 o.`note`,</span><br><span class="line">	 u.`username`,</span><br><span class="line">	 u.`address`</span><br><span class="line">	FROM `order` o</span><br><span class="line">	LEFT JOIN `user` u</span><br><span class="line">	ON u.id = o.`user_id`</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>测试</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">	public void testGetOrderUser() &#123;</span><br><span class="line">		SqlSession openSession = SqlSessionFactoryUtils.getSqlSessionFactory().openSession();</span><br><span class="line">		OrderMaper orderMaper = openSession.getMapper(OrderMaper.class);</span><br><span class="line">		List &lt;UserOrder&gt;orderList = orderMaper.getOrderUser();</span><br><span class="line">		for (UserOrder order: orderList) &#123;</span><br><span class="line">			System.out.println(order);</span><br><span class="line">		&#125;</span><br><span class="line">		openSession.close();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-1-2-使用resultMap"><a href="#3-1-2-使用resultMap" class="headerlink" title="3.1.2 使用resultMap"></a>3.1.2 使用resultMap</h3><blockquote>
<p>基于面向对象的思想，我们直接对原有的pojo对象进行改造，使之能够接收到返回的属性（添加属性）。<br>添加一个User类型的属性（面向对象的思想）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Order &#123;</span><br><span class="line">	private Integer id;</span><br><span class="line"></span><br><span class="line">	private Integer userId;</span><br><span class="line"></span><br><span class="line">	private String number;</span><br><span class="line"></span><br><span class="line">	private Date createtime;</span><br><span class="line"></span><br><span class="line">	private String note;</span><br><span class="line"></span><br><span class="line">	private User user1;</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">  .（set/get方法）</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改关系映射文件<br>type：指定映射到哪一个pojo，就是返回的<br>定义普通属性<br>property:在pojo中的属性名<br>column：在数据库中的列名<br>association–配置一对一查询<br>property：绑定Order中的用户属性    即Order.user1<br>【注：为了区别pojo中的user对象，在Order中定义的是user1成员】<br> property对应的是需要你告知来自哪个pojo中的哪个属性【注：一定要与javaType（pojo类）中对应的属性名称相同，参考前面定义的user1】<br> javaType是property的数据类型，支持别名</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap type=&quot;Order&quot; id=&quot;order_user_map&quot;&gt;</span><br><span class="line">		&lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt;</span><br><span class="line">		&lt;result property=&quot;userId&quot; column=&quot;user_id&quot;/&gt;</span><br><span class="line">		&lt;result property=&quot;number&quot; column=&quot;number&quot;/&gt;</span><br><span class="line">		&lt;result property=&quot;createtime&quot; column=&quot;createtime&quot;/&gt;</span><br><span class="line">		&lt;result property=&quot;note&quot; column=&quot;note&quot;/&gt;</span><br><span class="line">		&lt;!-- association配置一对一查询</span><br><span class="line">		property：绑定Order中的用户属性	即Order.user1【注：为了区别pojo中的user对象，在Order中定义的是user1成员】</span><br><span class="line">		javaType：属性的数据类型    property的数据类型，支持别名</span><br><span class="line">		我感觉：</span><br><span class="line">			property对应的是需要你告知来自哪个pojo中的哪个属性</span><br><span class="line">			javaType是property的数据类型，支持别名</span><br><span class="line">		 --&gt;</span><br><span class="line">		 &lt;association property=&quot;user1&quot; javaType=&quot;pojo.User&quot;&gt;</span><br><span class="line">		 	&lt;!--</span><br><span class="line">		 	感觉：每一个块块都要有一个主键，而user表中的主键就对应Order表中的user_id</span><br><span class="line">		 	 --&gt;</span><br><span class="line">		 	&lt;id property=&quot;id&quot; column=&quot;user_id&quot;/&gt;</span><br><span class="line">		 	&lt;result property=&quot;username&quot; column=&quot;username&quot;/&gt;</span><br><span class="line">		 &lt;/association&gt;</span><br><span class="line">	&lt;/resultMap&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>sql语句<br>使用resultMap的名字使用前面定义的resultMap的名字。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getOrderUserByMap&quot; resultMap=&quot;order_user_map&quot;&gt;</span><br><span class="line">		SELECT</span><br><span class="line">		  o.`id`,</span><br><span class="line">		  o.`user_id`,</span><br><span class="line">		  o.`number`,</span><br><span class="line">		  o.`createtime`,</span><br><span class="line">		  o.`note`,</span><br><span class="line">		  u.`username`,</span><br><span class="line">		  u.`address`</span><br><span class="line">		FROM `order` o</span><br><span class="line">		LEFT JOIN `user` u</span><br><span class="line">		ON u.id = o.`user_id`</span><br><span class="line">	&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-一对多查询"><a href="#3-2-一对多查询" class="headerlink" title="3.2 一对多查询"></a>3.2 一对多查询</h3><blockquote>
<p>当我们查询用户张三下了多少订单时，此时返回的是多个数据，基于一对多查询。<br>改造pojo</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String username;// 用户姓名</span><br><span class="line">	private String sex;// 性别</span><br><span class="line">	private Date birthday;// 生日</span><br><span class="line">	private String address;// 地址</span><br><span class="line">	private String uuid2;//uuid</span><br><span class="line">	private List&lt;Order&gt; order123;</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">  (Get/Set方法)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>改造关系映射文件<br>property:在pojo中的属性名<br>column：在数据库中的列名<br>collection:配置一对多的关系<br>         property:用户的Order属性【注：在pojo.user中的属性，为了以示区别，这里我定义的是一个order123的属性】<br>         ofType:property的数据类型，支持别名<br>  其余配置与一对一相同</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap type=&quot;user&quot; id=&quot;user_order_map&quot;&gt;</span><br><span class="line">   &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt;</span><br><span class="line">   &lt;result property=&quot;username&quot; column=&quot;username&quot;/&gt;</span><br><span class="line">   &lt;result property=&quot;birthday&quot; column=&quot;birthday&quot;/&gt;</span><br><span class="line">   &lt;result property=&quot;sex&quot; column=&quot;sex&quot;/&gt;</span><br><span class="line">   &lt;result property=&quot;address&quot; column=&quot;address&quot;/&gt;</span><br><span class="line">   &lt;!-- collection:配置一对多的关系</span><br><span class="line">   property:用户的Order属性【注：在pojo.user中的属性，为了以示区别，这里我定义的是一个order123的属性】</span><br><span class="line">   ofType:property的数据类型，支持别名</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;collection property=&quot;order123&quot; ofType=&quot;pojo.Order&quot;&gt;</span><br><span class="line">     &lt;id property=&quot;userId&quot; column=&quot;oid&quot;/&gt;</span><br><span class="line">     &lt;result property=&quot;number&quot; column=&quot;number&quot;/&gt;</span><br><span class="line">     &lt;result property=&quot;createtime&quot; column=&quot;createtime&quot;/&gt;</span><br><span class="line">    &lt;/collection&gt;</span><br><span class="line">  &lt;/resultMap&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>SQL语句</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserOrderByMap&quot; resultMap=&quot;user_order_map&quot;&gt;</span><br><span class="line">		SELECT</span><br><span class="line">		u.`id`,</span><br><span class="line">		u.`username`,</span><br><span class="line">		u.`birthday`,</span><br><span class="line">		u.`sex`,</span><br><span class="line">		u.`address`,</span><br><span class="line">		u.`uuid2`,</span><br><span class="line">		o.`id` oid,</span><br><span class="line">		o.`number`,</span><br><span class="line">		o.`createtime`</span><br><span class="line">		FROM `user` u</span><br><span class="line">		LEFT JOIN `order` o</span><br><span class="line">		ON o.`user_id` = u.`id`</span><br><span class="line">	&lt;/select&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/04/12/java/MyBatis逆向工程/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          MyBatis逆向工程
        
      </div>
    </a>
  
  
    <a href="/2019/04/04/java/MyBatis学习(1)/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">MyBatis学习（1）</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>


<div class="ds-share share" data-thread-key="java/Mybatis学习(2)" data-title="MyBatis学习（2）" data-url="http://SlectRxz.github.io/2019/04/10/java/Mybatis学习(2)/"  data-images="img/1.jpg" data-content="MyBatis学习（2）">
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">
      	<li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
        <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
        <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
 </div>
 





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2019 Rong
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>